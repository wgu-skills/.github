name: 'Updater Action'
description: 'Updates collection data'
inputs:
  skillCollectionSlug:
    description: 'Skill Collection Slug'
    required: true
  skillCollectionUrl:
    description: 'Skill Collection URL'
    required: true
  skillCollectionUuid:
    description: 'Skill Collection UUID'
    required: true
  gitOrg:
    description: 'Organization'
    required: true
  gitUsername:
    description: 'Username'
    required: true
  gitEmail:
    description: 'Email'
    required: true
  patToken:
    description: 'Personal Access Token'
    required: true
runs:
  using: 'node20'
  main: 'dist/index.js'

jobs:
  build-and-commit-json:
    runs-on: ubuntu-latest
    steps:
    - name: Check out repository
      uses: actions/checkout@v2

    - name: Set up Node.js
      uses: actions/setup-node@v2
      with:
        node-version: '20'  # Updated to match 'node20'

    - name: Run your script
      run: node dist/index.js  # Replace with your actual script name

    - name: Commit and Push
      run: |
        git config --local user.email ${{ github.event.inputs.gitEmail }}
        git config --local user.name ${{ github.event.inputs.gitUsername }}
        git add -A
        git commit -m "Auto-update JSON file" -a || echo "No changes to commit"
        git push
